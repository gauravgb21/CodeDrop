const { body, oneOf, validationResult } = require('./check');
const { matchedData } = require('./filter');
const express = require('express');
const bodyParser = require('body-parser');

const app = express();
app.use(express.json());
app.use(bodyParser.text());
app.post('/*', [
  // body('trim1').trim(),
  oneOf([
    body('trim1').trim(),
    body('trim2').trim(),
  ])
], (req, res) => {
  console.log(req.body, req.query);
  const data = matchedData(req);
  const result = validationResult(req);

  res.json({
    data,
    errors: result.mapped()
  });
});

app.listen(3000);